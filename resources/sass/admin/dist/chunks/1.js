(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+TlC":function(t,e,a){"use strict";var i=a("Q5Zs"),s=a.n(i),n=a("l+2V"),r=a("ta7f"),o=a("+jP+");!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a=" *[data-v-5928e1c7] { -webkit-box-sizing: border-box; box-sizing: border-box; } .fullscreen-v-img[data-v-5928e1c7] { z-index: 9999; height: 100%; width: 100%; position: fixed; top: 0; left: 0; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); -ms-touch-action: none; touch-action: none; } .content-v-img img[data-v-5928e1c7] { width: auto; height: auto; max-width: 100%; max-height: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .header-v-img[data-v-5928e1c7], .footer-v-img[data-v-5928e1c7] { position: absolute; width: 100%; background-color: rgba(0, 0, 0, 0.3); height: 50px; z-index: 9999; display: flex; align-items: center; } .header-v-img[data-v-5928e1c7] { justify-content: space-between; } .footer-v-img[data-v-5928e1c7] { bottom: 0; justify-content: center; height: 70px; /* scrolling thumbnails on mobile */ overflow-x: auto; } .footer-v-img img[data-v-5928e1c7] { width: 60px; height: 60px; cursor: pointer; -webkit-transition: transform 0.2s ease-out; transition: transform 0.2s ease-out; object-fit: cover; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .footer-v-img img.is-selected[data-v-5928e1c7] { transform: scale(1.1); } .footer-v-img img[data-v-5928e1c7]:not(:last-child) { margin-right: 7px; } .title-v-img[data-v-5928e1c7] { font-family: 'Avenir', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 400; color: white; text-align: center; max-height: 100%; overflow: auto; } .count-v-img[data-v-5928e1c7], .buttons-v-img[data-v-5928e1c7] { width: 80px; font-family: 'Avenir', Helvetica, Arial, sans-serif; } .count-v-img[data-v-5928e1c7] { font-size: 15px; color: white; margin-left: 10px; } .buttons-v-img[data-v-5928e1c7] { margin-right: 10px; text-align: right; } .buttons-v-img span path[data-v-5928e1c7] { fill: #e5e6eb; -webkit-transition: fill 0.4s ease-in-out; transition: fill 0.4s ease-in-out; } .buttons-v-img span[data-v-5928e1c7] { cursor: pointer; color: #e5e6eb; font-size: 30px; -webkit-transition: color 0.4s ease-in-out; transition: color 0.4s ease-in-out; text-decoration: none; text-align: center; } .buttons-v-img span[data-v-5928e1c7]:not(:last-child) { margin-right: 8px; } .buttons-v-img span svg[data-v-5928e1c7] { height: 20px; width: 15px; } .buttons-v-img span:hover svg path[data-v-5928e1c7] { fill: white; } .buttons-v-img span[data-v-5928e1c7]:hover { color: white; } .prev-v-img svg[data-v-5928e1c7], .next-v-img svg[data-v-5928e1c7] { margin: 5px auto; } .prev-v-img[data-v-5928e1c7], .next-v-img[data-v-5928e1c7] { color: white; width: 35px; height: 35px; position: absolute; top: 50%; margin-top: -12.5px; font-size: 15px; font-family: 'Avenir', Helvetica, Arial, sans-serif; text-align: center; background-color: rgba(0, 0, 0, 0.3); z-index: 1000; opacity: 0.3; -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; cursor: pointer; } .prev-v-img[data-v-5928e1c7]:hover, .next-v-img[data-v-5928e1c7]:hover { opacity: 1; } .prev-v-img[data-v-5928e1c7] { left: 10px; } .next-v-img[data-v-5928e1c7] { right: 10px; } .v-img-fade-enter[data-v-5928e1c7], .v-img-fade-leave-to[data-v-5928e1c7] { opacity: 0; } .v-img-fade-enter-active[data-v-5928e1c7], .v-img-fade-leave-active[data-v-5928e1c7] { -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}}();var l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.closed?t._e():a("div",{staticClass:"fullscreen-v-img",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.close(e)}}},[a("div",{staticClass:"header-v-img"},[a("span",{staticClass:"count-v-img"},[t.images.length>1?a("span",[t._v(t._s(t.currentImageIndex+1)+"/"+t._s(t.images.length)+" ")]):t._e()]),a("span",{staticClass:"title-v-img"},[t._v(t._s(t.titles[t.currentImageIndex]))]),a("div",{staticClass:"buttons-v-img"},[t.sourceButtons[t.currentImageIndex]?a("span",[a("a",{attrs:{href:t.images[t.currentImageIndex],target:"_blank"}},[a("svg",{staticStyle:{"enable-background":"new 0 0 475.078 475.077"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"512px",height:"512px",viewBox:"0 0 475.078 475.077","xml:space":"preserve"}},[a("path",{attrs:{d:"M467.083,318.627c-5.324-5.328-11.8-7.994-19.41-7.994H315.195l-38.828,38.827c-11.04,10.657-23.982,15.988-38.828,15.988    c-14.843,0-27.789-5.324-38.828-15.988l-38.543-38.827H27.408c-7.612,0-14.083,2.669-19.414,7.994    C2.664,323.955,0,330.427,0,338.044v91.358c0,7.614,2.664,14.085,7.994,19.414c5.33,5.328,11.801,7.99,19.414,7.99h420.266    c7.61,0,14.086-2.662,19.41-7.99c5.332-5.329,7.994-11.8,7.994-19.414v-91.358C475.078,330.427,472.416,323.955,467.083,318.627z     M360.025,414.841c-3.621,3.617-7.905,5.424-12.854,5.424s-9.227-1.807-12.847-5.424c-3.614-3.617-5.421-7.898-5.421-12.844    c0-4.948,1.807-9.236,5.421-12.847c3.62-3.62,7.898-5.431,12.847-5.431s9.232,1.811,12.854,5.431    c3.613,3.61,5.421,7.898,5.421,12.847C365.446,406.942,363.638,411.224,360.025,414.841z M433.109,414.841    c-3.614,3.617-7.898,5.424-12.848,5.424c-4.948,0-9.229-1.807-12.847-5.424c-3.613-3.617-5.42-7.898-5.42-12.844    c0-4.948,1.807-9.236,5.42-12.847c3.617-3.62,7.898-5.431,12.847-5.431c4.949,0,9.233,1.811,12.848,5.431    c3.617,3.61,5.427,7.898,5.427,12.847C438.536,406.942,436.729,411.224,433.109,414.841z",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M224.692,323.479c3.428,3.613,7.71,5.421,12.847,5.421c5.141,0,9.418-1.808,12.847-5.421l127.907-127.908    c5.899-5.519,7.234-12.182,3.997-19.986c-3.23-7.421-8.847-11.132-16.844-11.136h-73.091V36.543c0-4.948-1.811-9.231-5.421-12.847    c-3.62-3.617-7.901-5.426-12.847-5.426h-73.096c-4.946,0-9.229,1.809-12.847,5.426c-3.615,3.616-5.424,7.898-5.424,12.847V164.45    h-73.089c-7.998,0-13.61,3.715-16.846,11.136c-3.234,7.801-1.903,14.467,3.999,19.986L224.692,323.479z",fill:"#FFFFFF"}})])])]):t._e(),a("span",{on:{click:t.close}},[t._v("Ã—")])])]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.visibleUI&&1!==t.images.length?a("span",{staticClass:"prev-v-img",on:{click:t.prev}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z",fill:"#fff"}})])]):t._e()]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.visibleUI&&1!==t.images.length?a("span",{staticClass:"next-v-img",on:{click:t.next}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z",fill:"#fff"}})])]):t._e()]),t.thumbnails&&t.images.length>1?a("div",{staticClass:"footer-v-img"},t._l(t.images,function(e,i){return a("img",{key:i,class:{"is-selected":t.currentImageIndex==i},attrs:{src:e},on:{click:function(e){t.select(i)}}})})):t._e(),a("div",{staticClass:"content-v-img"},[a("img",{attrs:{src:t.images[t.currentImageIndex]},on:{click:t.next}})])],1)])},staticRenderFns:[],_scopeId:"data-v-5928e1c7",data:function(){return{images:[],titles:[],sourceButtons:[],visibleUI:!0,currentImageIndex:0,closed:!0,uiTimeout:null,handlers:{},thumbnails:!1}},watch:{closed:function(t){t&&this.handlers.closed&&this.handlers.closed(),!t&&this.handlers.opened&&this.handlers.opened()}},methods:{fireChangeEvent:function(){this.handlers.changed&&this.handlers.changed(this.currentImageIndex)},close:function(){this.closed||(document.querySelector("body").classList.remove("body-fs-v-img"),this.images=[],this.currentImageIndex=0,this.closed=!0)},next:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex+1<this.images.length?this.currentImageIndex++:this.currentImageIndex=0,this.fireChangeEvent())},select:function(t){this.currentImageIndex=t},prev:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex>0?this.currentImageIndex--:this.currentImageIndex=this.images.length-1,this.fireChangeEvent())},showUI:function(){var t=this;this.closed||(clearTimeout(this.uiTimeout),this.visibleUI=!0,this.uiTimeout=setTimeout(function(){t.visibleUI=!1},3500))}},created:function(){var t=this;window.addEventListener("keyup",function(e){27!==e.keyCode&&81!==e.keyCode||t.close(),39!==e.keyCode&&76!==e.keyCode||t.next(),37!==e.keyCode&&72!==e.keyCode||t.prev()}),window.addEventListener("scroll",function(){t.close()}),window.addEventListener("mousemove",function(){t.showUI()})}},m=(function(){function t(t){this.value=t}function e(e){function a(s,n){try{var r=e[s](n),o=r.value;o instanceof t?Promise.resolve(o.value).then(function(t){a("next",t)},function(t){a("throw",t)}):i(r.done?"return":"normal",r.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":s.resolve({value:e,done:!0});break;case"throw":s.reject(e);break;default:s.resolve({value:e,done:!1})}(s=s.next)?a(s.key,s.arg):n=null}var s,n;this._invoke=function(t,e){return new Promise(function(i,r){var o={key:t,arg:e,resolve:i,reject:r,next:null};n?n=n.next=o:(s=n=o,a(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}),c=function(t,e,a){var i="pointer",s=e.arg||null,n=void 0,r=void 0,o=t.src,l=void 0,m=void 0,c={};return a.altAsTitle&&(l=t.alt),n=a.openOn,r=a.sourceButton,m=a.thumbnails,void 0!==e.value&&(i=e.value.cursor||i,s=e.value.group||s,n=e.value.openOn||n,o=e.value.src||o,l=e.value.title||l,c.opened=e.value.opened,c.closed=e.value.closed,c.changed=e.value.changed,void 0!==e.value.sourceButton&&(r=e.value.sourceButton),void 0!==e.value.thumbnails&&(m=e.value.thumbnails)),t.setAttribute("data-vue-img-src",o),s&&t.setAttribute("data-vue-img-group",s),l&&t.setAttribute("data-vue-img-title",l),r&&t.setAttribute("data-vue-img-source-button",r),m&&t.setAttribute("data-vue-img-thumbnails",m),o||console.error("v-img element missing src parameter."),t.style.cursor=i,{cursor:i,src:o,group:s,title:l,events:c,sourceButton:r,openOn:n,thumbnails:m}},u=function(t,e){var a=t.extend(l);e=m({altAsTitle:!1,sourceButton:!1,thumbnails:!1,openOn:"click"},e),t.directive("img",{update:function(t,a,i,s){var n=void 0,r=void 0;s.data.attrs&&i.data.attrs&&(r=s.data.attrs.src!==i.data.attrs.src,e.altAsTitle&&(n=s.data.attrs.alt!==i.data.attrs.alt));var o=a.oldValue!==a.value;(r||n||o)&&c(t,a,e)},bind:function(i,s){var n=c(i,s,e),r=window.vueImg;if(!r){var o=document.createElement("div");o.setAttribute("id","imageScreen"),document.querySelector("body").appendChild(o),r=window.vueImg=(new a).$mount("#imageScreen")}i.addEventListener(n.openOn,function(){var e=void 0;e=i.dataset.vueImgGroup?[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(document.querySelectorAll('img[data-vue-img-group="'+i.dataset.vueImgGroup+'"]'))):[i],t.set(r,"images",e.map(function(t){return t.dataset.vueImgSrc})),t.set(r,"titles",e.map(function(t){return t.dataset.vueImgTitle})),t.set(r,"sourceButtons",e.map(function(t){return"true"===t.dataset.vueImgSourceButton})),t.set(r,"thumbnails","true"===i.dataset.vueImgThumbnails),t.set(r,"currentImageIndex",e.indexOf(i)),t.set(r,"handlers",n.events),t.set(r,"closed",!1)})}})};"undefined"!=typeof window&&window.Vue&&window.Vue.use(u);var d=u;Vue.use(d,{altAsTitle:!0});var v={props:["ahsType","writeMode"],components:{MaskedInput:s.a,Datepicker:o.a},data:function(){return{isAddItem:!1,currencyMask:n.createNumberMask({prefix:"Rp. "}),jasaForm:{id:0,ref:"",jasa:{},is_terkecil:{}},showItemImageIconPreview:!0,itemImageIconPreview:"fas fa-file",itemImagePreview:"",itemForm:{id:0,p_id:0,p_item_id:0,nama:"",image:"",deskripsi:"",tanggal:new Date,harga:"0",rok:"0"},showedItemIndex:0,onApplySuggestItem:!1,suggestItem:{data:[],count:0},sortBy:"id",sortDesc:!1,perPage:5,curPage:1,searchString:"",loading:!1,fields:[{key:"nama_item",sortable:!0,thStyle:"min-width: 15rem"},{key:"harga_rab",label:"Harga",sortable:!0,thStyle:"min-width: 10rem"},{key:"pengajuan",sortable:!0,thStyle:"min-width: 10rem"},{key:"actions",label:" ",tdClass:"text-center text-nowrap"}]}},validations:{itemForm:{nama:{required:r.required},harga:{required:r.required},rok:{required:r.required}}},computed:{ahsName:function(){return"rab"==this.ahsType?"AHS Usulan":"evaluasi"==this.ahsType?"AHS Evaluasi":"HPS"},formTitle:function(){return this.isAddItem?"Tambah Baru":"Edit"},refItemNotEmpty:function(){var t=this,e=!0;return 0!=this.pengajuan.item.length&&(_.forEach(this.pengajuan.item,function(a,i){0==a["ref_"+t.ahsType].length&&(e=!1)}),e)},pengajuan:{get:function(){return this.$store.state.pengajuan.oneData},set:function(t){this.$store.commit("pengajuan/setOneData",t)}},evalJumlah:function(){var t=this,e=0;return _.forEach(this.pengajuan.item,function(a,i){e+=(a["harga_"+t.ahsType]+a["jasa_"+t.ahsType])*a.volume}),e},evalPpn:function(){return Math.round(.1*this.evalJumlah)},evalTotal:function(){return this.evalJumlah+this.evalPpn},evalTotalDibulatkan:function(){return 1e3*Math.round(this.evalTotal/1e3)},totalPages:function(){return Math.ceil(this.suggestItem.count/this.perPage)}},watch:{curPage:function(t){this.loadItemSuggestion(t,this.searchString,this.sortBy,this.sortDesc)},perPage:function(t){this.loadItemSuggestion(this.curPage,this.searchString,this.sortBy,this.sortDesc)},sortBy:function(t){this.loadItemSuggestion(this.curPage,this.searchString,t,this.sortDesc)},sortDesc:function(t){this.loadItemSuggestion(this.curPage,this.searchString,this.sortBy,t)},searchString:function(t){if(""!=t){var e=t.toLowerCase(),a=this;clearTimeout(this.suggestTimeout),this.suggestTimeout=setTimeout(function(){a.loadItemSuggestion(1,e)},300)}else this.resetItemSuggestion()}},created:function(){},methods:{formatPrice:function(t){return Object(i.conformToMask)(String(t),this.currencyMask,{guide:!1}).conformedValue},showItemSuggestion:function(){this.loadItemSuggestion(1),this.$bvModal.show("suggestion-refitem-modals-form"+this.ahsType)},resetItemSuggestion:function(){this.loadItemSuggestion(1)},loadItemSuggestion:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.loading=!0;var n=this.perPage*(t-1),r={limit:this.perPage,offset:n};""!=a&&(r.q=a),0!=i&&(r.orderBy=i,r.orderType=s?"DESC":"ASC"),this.LocalApi.get(this.AppConfig.endpoint.api.Master+"/item",{params:r}).then(function(t){e.suggestItem=t.data.data})},applyItemSuggestion:function(t){var e=this.pengajuan.item[this.showedItemIndex],a=this;this.suggestItem=[],this.onApplySuggestItem=!0,this.itemForm={id:0,p_id:e.p_id,p_item_id:e.id,nama:t.pengajuan.spk.nomor,deskripsi:t.keterangan,image:"",tanggal:new Date,harga:this.formatPrice(parseInt(t.harga_rab)),rok:"0"},setTimeout(function(){a.onApplySuggestItem=!1,a.$bvModal.hide("suggestion-refitem-modals-form"+a.ahsType)},200)},jasaFormShow:function(){var t=this,e=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],arguments.length>1?arguments[1]:void 0);this.jasaForm={id:e,ref:this.ahsType,jasa:{},is_terkecil:{}},_.forEach(this.pengajuan.item,function(e,a){t.jasaForm.jasa[e.id]=t.formatPrice(e["jasa_"+t.ahsType]),t.jasaForm.is_terkecil[e.id]=e["is_terkecil_"+t.ahsType]}),this.$bvModal.show("itemjasa-modals-form-"+this.ahsType)},jasaFormSubmitted:function(t){var e=this;_.forEach(this.jasaForm.jasa,function(t,a){e.jasaForm.jasa[a]=e.jasaForm.jasa[a].replace(/\D+/g,"")}),this.$store.dispatch("pengajuan/updateJasa",this.jasaForm).then(function(t){e.Web.showAlert({text:"Data saved"}),e.$bvModal.hide("itemjasa-modals-form-"+e.ahsType)}).catch(function(t){e.Web.showAlert({text:"Save data failed",type:"warning"})})},showForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.suggestItem=[],this.isAddItem=t;var i=this.pengajuan.item[e];if(this.showedItemIndex=e,t)this.itemForm={id:0,p_id:i.p_id,p_item_id:i.id,nama:"",deskripsi:"",image:"",tanggal:new Date,harga:"",rok:""},this.showItemImageIconPreview=!0,this.itemImageIconPreview="fas fa-file",this.itemImagePreview="",this.$bvModal.show("itemref-modals-form-"+this.ahsType);else{var s=i["ref_"+this.ahsType][a];this.itemForm.id=s.id,this.itemForm.p_id=s.p_id,this.itemForm.p_item_id=s.p_item_id,this.itemForm.nama=s.nama,this.itemForm.deskripsi=s.deskripsi,this.itemForm.image=s.image,this.itemForm.tanggal=new Date(s.tanggal),this.itemForm.harga=this.formatPrice(s.harga),this.itemForm.rok=this.formatPrice(s.rok),this.$bvModal.show("itemref-modals-form-"+this.ahsType),this.itemImagePreview="",this.showItemImageIconPreview=!0,this.itemImageIconPreview="fas fa-file",this.itemForm.image&&(this.isPdf(this.itemForm.image)?(this.showItemImageIconPreview=!0,this.itemImageIconPreview="fas fa-file-pdf"):(this.itemImagePreview.src="".concat(this.publicUrl,"upload/").concat(this.itemForm.image),this.showItemImageIconPreview=!1))}},formSubmitted:function(t){var e=this;if(t.preventDefault(),this.$v.$touch(),this.$v.$invalid)return this.Web.showAlert({text:"Please fix form error",title:"Alert",type:"warning"}),!1;var a="pengajuan/updateRefItem";this.isAddItem&&(a="pengajuan/createRefItem"),this.itemForm.harga=parseInt(this.itemForm.harga.replace(/\D+/g,"")),this.itemForm.rok=parseInt(this.itemForm.rok.replace(/\D+/g,"")),this.itemForm.rok<=0&&(this.itemForm.rok=0),this.itemForm.ahsType=this.ahsType;var i=new FormData;_.forEach(this.itemForm,function(t,e){i.append(e,t)});var s={data:this.itemForm,form:i};this.$store.dispatch(a,s).then(function(t){e.Web.showAlert({text:"Data saved"}),e.$bvModal.hide("itemref-modals-form-"+e.ahsType)}).catch(function(t){e.Web.showAlert({text:"Save data failed",type:"warning"})})},handleFileUpload:function(t){"application/pdf"==t.target.files[0].type?(this.itemImagePreview="",this.showItemImageIconPreview=!0,this.itemImageIconPreview="fas fa-file-pdf"):(this.showItemImageIconPreview=!1,this.itemImageIconPreview="fas fa-file",this.itemImagePreview="",this.itemImagePreview=URL.createObjectURL(t.target.files[0]))},isPdf:function(t){return"pdf"==t.split(".").pop().toLowerCase()},deleteItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.pengajuan.item[e]["ref_"+this.ahsType][a];this.Web.showAlert({styleType:"modal",style:"warning",title:"Delete Confirmation",text:"Are you sure ?",modalButtonCancel:"No",modalButtonOk:"Yes",onOk:function(){t.$store.dispatch("pengajuan/deleteRefItem",{id:i.id,p_id:i.p_id,ahsType:t.ahsType}).then(function(e){t.Web.showAlert({text:"Data deleted"})}).catch(function(e){t.Web.showAlert({text:"Delete fail",type:"warning"})})}})},downloadDoc:function(){var t="rab"==this.ahsType?"ahs-usulan":"evaluasi"==this.ahsType?"ahs-evaluasi":"hps";this.download(t+"/"+this.pengajuan.id,t+".xlsx")}}},h=(a("kAky"),a("KHd+")),p={props:["step","accessRead","accessUpdate"],components:{"item-ahs":Object(h.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-responsive",staticStyle:{width:"100%",overflow:"auto"}},[a("table",{staticClass:"table table-hover table-bordered table-sm mb-0"},[a("thead",[a("tr",[a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("#")]),t._v(" "),a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("Nama")]),t._v(" "),a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("Satuan")]),t._v(" "),a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("Vol")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v("Referensi")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("AHS")]),t._v(" "),t.writeMode&&1!=t.pengajuan[t.ahsType+"_final"]?a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("Action")]):t._e()]),t._v(" "),t._m(0)]),t._v(" "),a("tbody",[t._l(t.pengajuan.item,function(e,i){return[a("tr",{key:"item"+e.id,staticClass:"table-secondary"},[a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.nama_item))]),t._v(" "),a("td",{attrs:{colspan:"6"}},[e["harga_"+t.ahsType]&&"rab"!=t.ahsType?a("div",[a("small",[a("b",[t._v("Material : ")]),t._v(t._s(t.formatPrice(e["harga_"+t.ahsType])))]),t._v(" "),a("small",[a("b",[t._v("Jasa : ")]),t._v(t._s(t.formatPrice(e["jasa_"+t.ahsType])))]),t._v(" "),a("small",[a("b",[t._v("Sub total : ")]),t._v(t._s(t.formatPrice(e["harga_"+t.ahsType]+e["jasa_"+t.ahsType])))])]):t._e()]),t._v(" "),t.writeMode&&1!=t.pengajuan[t.ahsType+"_final"]?a("td",[a("b-btn",{staticClass:"btn btn-success btn-xs",on:{click:function(e){return t.showForm(!0,i)}}},[a("i",{staticClass:"ion ion-md-add"}),t._v(" Ref\n              ")])],1):t._e()]),t._v(" "),t._l(e["ref_"+t.ahsType],function(s,n){return[a("tr",{key:"refitem"+t.ahsType+s.id},[a("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(s.nama))]),t._v(" "),a("td",[t._v(t._s(e.satuan))]),t._v(" "),a("td",[t._v(t._s(e.volume))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(s.harga)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(s.rok)))]),t._v(" "),a("td",[a("div",[t._v(t._s(s.deskripsi))]),t._v(" "),s.image?[t.isPdf(s.image)?[a("a",{attrs:{href:t.publicUrl+"upload/"+s.image,target:"_blank"}},[a("i",{staticClass:"fas fa-file-pdf"}),t._v(" view file\n                          ")])]:[s.image?a("img",{directives:[{name:"img",rawName:"v-img"}],staticClass:"d-block ui-w-80",attrs:{src:t.publicUrl+"upload/"+s.image,alt:""}}):t._e()]]:t._e()],2),t._v(" "),a("td",[t._v(t._s(t.formatPrice((s.harga+s.rok)*e.volume)))]),t._v(" "),t.writeMode&&1!=t.pengajuan[t.ahsType+"_final"]?a("td",[a("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"Edit"},on:{click:function(e){return t.showForm(!1,i,n)}}},[a("i",{staticClass:"ion ion-md-create"})]),t._v(" "),a("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"Remove"},on:{click:function(e){return t.deleteItem(i,n)}}},[a("i",{staticClass:"ion ion-md-close"})])],1):t._e()])]})]}),t._v(" "),"rab"!=t.ahsType?[t._m(1),t._v(" "),a("tr",[t._m(2),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.jumlah)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.evalJumlah)))])]),t._v(" "),a("tr",[t._m(3),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.ppn)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.evalPpn)))])]),t._v(" "),a("tr",[t._m(4),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.total)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.evalTotal)))])]),t._v(" "),a("tr",[t._m(5),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.total_dibulatkan)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.evalTotalDibulatkan)))])])]:t._e()],2)])]),t._v(" "),a("b-card-body",{staticClass:"text-right"},[a("b-btn",{staticClass:"btn btn-secondary btn-sm",attrs:{disabled:!(1==t.pengajuan[t.ahsType+"_final"])},on:{click:t.downloadDoc}},[a("i",{staticClass:"ion ion-md-cloud-download"}),t._v(" Unduh Dokumen "+t._s(t.ahsName)+"\n          ")]),t._v(" "),1!=t.pengajuan[t.ahsType+"_final"]&&t.refItemNotEmpty?a("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"secondary btn-sm",title:"Tambah jasa dan Finalisasi"},on:{click:function(e){return t.jasaFormShow(!1,t.pengajuan.id)}}},[a("i",{staticClass:"ion ion-md-checkmark"}),t._v(" jasa\n          ")]):t._e()],1),t._v(" "),t.writeMode?[a("b-modal",{attrs:{id:"itemref-modals-form-"+t.ahsType},on:{ok:t.formSubmitted,hidden:t.$v.$reset}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n                  Form /\n                  "),a("span",{staticClass:"font-weight-light"},[t._v(t._s(t.formTitle))]),t._v(" "),a("br")]),t._v(" "),a("div",[a("b-form-row",{staticClass:"position-relative"},[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Nama"}},[a("b-input-group",{attrs:{state:t.$v.itemForm.nama.$error?"invalid":""}},[a("b-input-group-text",{staticStyle:{cursor:"pointer"},attrs:{slot:"prepend"},on:{click:function(e){return t.showItemSuggestion()}},slot:"prepend"},[a("i",{staticClass:"ion ion-ios-search"})]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.itemForm.nama,expression:"itemForm.nama",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nama",autocomplete:"off"},domProps:{value:t.itemForm.nama},on:{blur:[function(e){return t.$v.itemForm.nama.$touch()},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.itemForm,"nama",e.target.value.trim())}}})],1),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.itemForm.nama,fieldName:"Nama"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Tanggal"}},[a("datepicker",{attrs:{bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Tanggal","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.itemForm.tanggal,callback:function(e){t.$set(t.itemForm,"tanggal",e)},expression:"itemForm.tanggal"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Harga"}},[a("masked-input",{staticClass:"form-control",attrs:{type:"text",mask:t.currencyMask,placeholder:"Harga"},model:{value:t.itemForm.harga,callback:function(e){t.$set(t.itemForm,"harga","string"==typeof e?e.trim():e)},expression:"itemForm.harga"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"ROK"}},[a("masked-input",{staticClass:"form-control",attrs:{type:"text",mask:t.currencyMask,placeholder:"ROK"},model:{value:t.itemForm.rok,callback:function(e){t.$set(t.itemForm,"rok","string"==typeof e?e.trim():e)},expression:"itemForm.rok"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Deskirpsi"}},[a("b-textarea",{attrs:{placeholder:"Keterangan"},model:{value:t.itemForm.deskripsi,callback:function(e){t.$set(t.itemForm,"deskripsi","string"==typeof e?e.trim():e)},expression:"itemForm.deskripsi"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"File",description:"Allowed PDF, JPG, GIF or PNG"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 text-center mt-2 mb-2"},[t.showItemImageIconPreview?[a("i",{class:t.itemImageIconPreview,staticStyle:{"font-size":"3rem"}})]:[a("img",{staticClass:"d-block w-100 mr-2",attrs:{src:t.itemImagePreview,alt:""}})]],2),t._v(" "),a("div",{staticClass:"col-8"},[a("b-file",{attrs:{accept:"image/jpeg, image/png, image/gif, application/pdf"},on:{change:t.handleFileUpload},model:{value:t.itemForm.image,callback:function(e){t.$set(t.itemForm,"image",e)},expression:"itemForm.image"}})],1)])])],1)],1)]),t._v(" "),a("b-modal",{attrs:{id:"suggestion-refitem-modals-form"+t.ahsType,size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.cancel;return[a("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return i()}}},[t._v("\n                      Close\n                  ")])]}}],null,!1,959163939)},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n                  Pilih Item\n              ")]),t._v(" "),a("b-form-row",{staticClass:"mb-3 ml-2 mr-2"},[a("b-input-group",[t.loading?a("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"ion ion-md-sync"})]):t._e(),t._v(" "),t.loading?t._e():a("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"ion ion-ios-search"})]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Cari Item",autocomplete:"off"},domProps:{value:t.searchString},on:{input:function(e){e.target.composing||(t.searchString=e.target.value)}}}),t._v(" "),t.searchString?a("b-input-group-text",{attrs:{slot:"append"},on:{click:t.resetItemSuggestion},slot:"append"},[a("i",{staticClass:"ion ion-md-close"})]):t._e()],1)],1),t._v(" "),a("b-table",{staticClass:"card-table pb-0",attrs:{items:t.suggestItem.data,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":1,"per-page":t.perPage,small:!0,responsive:!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"kontak",fn:function(e){return[a("div",[a("b",[t._v("email :")]),t._v("\n                          "+t._s(e.item.email)+"\n                      ")]),t._v(" "),a("div",[a("b",[t._v("telepon :")]),t._v("\n                          "+t._s(e.item.telepon)+"\n                      ")]),t._v(" "),a("div",[a("b",[t._v("alamat :")]),t._v("\n                          "+t._s(e.item.alamat)+"\n                      ")])]}},{key:"harga_rab",fn:function(e){return[t._v("\n                      "+t._s(t.formatPrice(e.item.harga_rab))+"\n                  ")]}},{key:"pengajuan",fn:function(e){return[a("div",[a("b",[t._v("Nama Pekerjaan :")]),t._v("\n                          "+t._s(e.item.pengajuan?e.item.pengajuan.nama_pekerjaan:"-")+"\n                      ")]),t._v(" "),a("div",[a("b",[t._v("Jenis Pekerjaan :")]),t._v("\n                          "+t._s(e.item.pengajuan?e.item.pengajuan.jenis_pekerjaan?"Jasa":"Barang":"-")+"\n                      ")]),t._v(" "),a("div",[a("b",[t._v("Nomor SPK :")]),t._v("\n                          "+t._s(e.item.pengajuan&&e.item.pengajuan.spk?e.item.pengajuan.spk.nomor:"-")+"\n                      ")]),t._v(" "),a("div",[a("b",[t._v("Nomor RAB :")]),t._v("\n                          "+t._s(e.item.pengajuan&&e.item.pengajuan.rab?e.item.pengajuan.rab.no_usulan_rab:"-")+"\n                      ")])]}},{key:"actions",fn:function(e){return[a("b-btn",{attrs:{variant:"success btn-xs md-btn-flat",title:"Pilih Mitra"},on:{click:function(a){return t.applyItemSuggestion(e.item)}}},[a("i",{staticClass:"ion ion-md-checkmark"}),t._v(" Pilih\n                      ")])]}}],null,!1,1000334295)}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.suggestItem.count?a("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.curPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),a("div",{staticClass:"col-sm pt-3"},[t.suggestItem.count?a("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.suggestItem.count,"per-page":t.perPage,size:"sm"},model:{value:t.curPage,callback:function(e){t.curPage=e},expression:"curPage"}}):t._e()],1)])],1),t._v(" "),a("b-modal",{attrs:{id:"itemjasa-modals-form-"+t.ahsType,size:"sm"},on:{ok:t.jasaFormSubmitted},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok,s=e.cancel;return[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(t){return i()}}},[t._v("\n                      Simpan\n                  ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return s()}}},[t._v("\n                      Batal\n                  ")])]}}],null,!1,453440092)},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n                  Form /\n                  "),a("span",{staticClass:"font-weight-light"},[t._v("Finalisasi")]),t._v(" "),a("br")]),t._v(" "),t._l(t.pengajuan.item,function(e){return[a("b-form-row",{key:"form-item-jasa"+t.ahsType+e.id},[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Jasa item : "+e.nama_item}},[a("masked-input",{staticClass:"form-control",attrs:{type:"text",mask:t.currencyMask,placeholder:"Jasa"},model:{value:t.jasaForm.jasa[e.id],callback:function(a){t.$set(t.jasaForm.jasa,e.id,"string"==typeof a?a.trim():a)},expression:"jasaForm.jasa[item.id]"}})],1)],1),t._v(" "),a("b-form-row",{key:"form-item-is-terkecil-"+t.ahsType+e.id},[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Mode perhitungan : "+e.nama_item}},[a("b-form-select",{attrs:{options:{0:"Nilai rata-rata",1:"Nilai terkecil"}},model:{value:t.jasaForm.is_terkecil[e.id],callback:function(a){t.$set(t.jasaForm.is_terkecil,e.id,a)},expression:"jasaForm.is_terkecil[item.id]"}})],1)],1)]})],2)]:t._e()],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{staticClass:"text-center"},[this._v("Material")]),this._v(" "),e("th",{staticClass:"text-center"},[this._v("ROK")]),this._v(" "),e("th",[this._v("Deskripsi")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"bg-light"},[e("td",{staticClass:"text-center",attrs:{colspan:"6"}},[e("b",[e("small")])]),this._v(" "),e("td",[this._v("RAB Usulan")]),this._v(" "),e("td",[this._v("Evaluasi")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[e("small",[this._v("Jumlah")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[e("small",[this._v("PPN 10%")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[e("small",[this._v("TOTAL")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[e("small",[this._v("TOTAL (dibulatkan)")])])}],!1,null,null,null).exports,MaskedInput:s.a},validations:{itemForm:{nama_item:{required:r.required},satuan:{required:r.required}}},data:function(){return{currencyMask:n.createNumberMask({prefix:"Rp. "}),numberMask:[/[1-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/],ahsTabs:[],rabWriteMode:!1,isAddItem:!1,itemForm:{id:0,p_id:0,nama_item:"",keterangan:"",satuan:"",volume:"",harga_rab:"",jasa_rab:""},tabIndex:0}},computed:{access:function(){return this.$store.state.pengajuan.access},isAddPengajuan:function(){return!this.$route.params.pId},formTitle:function(){return this.isAddItem?"Tambah Baru":"Edit"},pengajuan:{get:function(){return this.$store.state.pengajuan.oneData},set:function(t){this.$store.commit("pengajuan/setOneData",t)}}},methods:{formatPrice:function(t){return Object(i.conformToMask)(String(t),this.currencyMask,{guide:!1}).conformedValue},downloadRab:function(){this.download("rab-usulan/"+this.pengajuan.id,"rab_usulan.xlsx")},showForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.isAddItem=t,t)this.itemForm={id:0,p_id:this.pengajuan.id,nama_item:"",keterangan:"",satuan:"",volume:""},this.$bvModal.show("item-modals-form");else{var a=this.pengajuan.item[e];this.itemForm.id=a.id,this.itemForm.p_id=a.p_id,this.itemForm.nama_item=a.nama_item,this.itemForm.keterangan=a.keterangan,this.itemForm.satuan=a.satuan,this.itemForm.volume=a.volume,this.$bvModal.show("item-modals-form")}},formSubmitted:function(t){var e=this;if(t.preventDefault(),this.$v.$touch(),this.$v.$invalid)return this.Web.showAlert({text:"Please fix form error",title:"Alert",type:"warning"}),!1;if(this.itemForm.volume=parseInt(this.itemForm.volume),this.itemForm.volume<=0)return this.Web.showAlert({text:"Volume tidak boleh kosong",title:"Alert",type:"warning"}),!1;var a="pengajuan/updateItem";this.isAddItem&&(a="pengajuan/createItem"),this.$store.dispatch(a,this.itemForm).then(function(t){e.Web.showAlert({text:"Data saved"}),e.$bvModal.hide("item-modals-form")}).catch(function(t){e.Web.showAlert({text:"Save data failed : "+t.message,type:"warning"})})},deleteItem:function(t){var e=this,a=this.pengajuan.item[t];this.Web.showAlert({styleType:"modal",style:"warning",title:"Delete Confirmation",text:"Are you sure ?",modalButtonCancel:"No",modalButtonOk:"Yes",onOk:function(){e.$store.dispatch("pengajuan/deleteItem",{id:a.id,p_id:a.p_id}).then(function(t){e.Web.showAlert({text:"Data deleted"})}).catch(function(t){e.Web.showAlert({text:"Delete fail : "+t.message,type:"warning"})})}})}},created:function(){var t=!1,e=this;(0==this.pengajuan.status&&1==this.step||this.isAddPengajuan)&&this.accessUpdate&&(this.rabWriteMode=!0,t=!0),this.ahsTabs.push({type:"rab",caption:"AHS Usulan",writeMode:t}),this.pengajuan.status_terakhir>=3&&this.step>=4&&(t=!(3!=this.pengajuan.status||!this.accessUpdate),this.ahsTabs.push({type:"evaluasi",caption:"AHS Evaluasi",writeMode:t})),this.pengajuan.status_terakhir>=6&&this.step>=7&&(t=!(6!=this.pengajuan.status||!this.accessUpdate),this.ahsTabs.push({type:"ahs",caption:"HPS",writeMode:t})),setTimeout(function(){4==e.step?e.tabIndex=2:7==e.step&&(e.tabIndex=3)},200)}},g=Object(h.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card-body",{staticClass:"pl-0 pb-0 pr-0 pt-1 bg-light"},[a("b-tabs",{staticClass:"nav-tabs-top",attrs:{card:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{staticClass:"p-0",attrs:{title:"RAB",active:""}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover table-bordered table-sm mb-0"},[a("thead",[a("tr",[a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"3"}},[t._v("#")]),t._v(" "),a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"3"}},[t._v("Nama")]),t._v(" "),a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"3"}},[t._v("Satuan")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("Usulan RAB")]),t._v(" "),t.rabWriteMode?a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"3"}},[t._v("Action")]):t._e()]),t._v(" "),a("tr",[a("th",{staticClass:"align-middle text-center",attrs:{rowspan:"2"}},[t._v("Vol")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v("Harga Satuan")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("Jumlah")])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("Material")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Jasa")])])]),t._v(" "),a("tbody",[t._l(t.pengajuan.item,function(e,i,s){return a("tr",{key:e.id},[a("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.nama_item))]),t._v(" "),a("td",[t._v(t._s(e.satuan))]),t._v(" "),a("td",[t._v(t._s(e.volume))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(e.harga_rab)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(e.jasa_rab)))]),t._v(" "),a("td",[t._v(t._s(t.formatPrice((e.jasa_rab+e.harga_rab)*e.volume)))]),t._v(" "),t.rabWriteMode?a("td",[a("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"Edit"},on:{click:function(e){return t.showForm(!1,i)}}},[a("i",{staticClass:"ion ion-md-create"})]),t._v(" "),1!=t.pengajuan.ahs_final&&1!=t.pengajuan.evaluasi_final&&1!=t.pengajuan.rab_final?a("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"Remove"},on:{click:function(e){return t.deleteItem(i)}}},[a("i",{staticClass:"ion ion-md-close"})]):t._e()],1):t._e()])}),t._v(" "),1==t.pengajuan.rab_final?[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[a("small",[t._v("Jumlah")])]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.jumlah)))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[a("small",[t._v("PPN 10%")])]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.ppn)))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[a("small",[t._v("TOTAL")])]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.total)))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[a("small",[t._v("TOTAL (dibulatkan)")])]),t._v(" "),a("td",[t._v(t._s(t.formatPrice(t.pengajuan.rab.total_dibulatkan)))])])]:t._e()],2)])]),t._v(" "),a("b-card-body",{staticClass:"text-right"},[t.rabWriteMode||1!=t.pengajuan.rab_final?t._e():a("b-btn",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.downloadRab()}}},[a("i",{staticClass:"ion ion-md-cloud-download"}),t._v(" Unduh Dokumen Rab Usulan\n            ")]),t._v(" "),t.rabWriteMode&&1!=t.pengajuan.rab_final?a("b-btn",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.showForm()}}},[t._v("Tambah item")]):t._e()],1)],1),t._v(" "),t._l(t.ahsTabs,function(t){return a("b-tab",{key:t.type,staticClass:"p-0",attrs:{title:t.caption}},[a("item-ahs",{attrs:{ahsType:t.type,writeMode:t.writeMode,canSave:t.canSave}})],1)})],2)],1),t._v(" "),t.rabWriteMode?[a("b-modal",{attrs:{id:"item-modals-form",size:"sm"},on:{ok:t.formSubmitted,hidden:t.$v.$reset}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n              Form / "),a("span",{staticClass:"font-weight-light"},[t._v(t._s(t.formTitle))]),a("br")]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Nama item"}},[a("b-input",{attrs:{state:t.$v.itemForm.nama_item.$error?"invalid":"",placeholder:"Nama Item"},on:{blur:function(e){return t.$v.itemForm.nama_item.$touch()}},model:{value:t.itemForm.nama_item,callback:function(e){t.$set(t.itemForm,"nama_item","string"==typeof e?e.trim():e)},expression:"itemForm.nama_item"}}),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.itemForm.nama_item,fieldName:"Nama item"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Keterangan"}},[a("b-textarea",{attrs:{placeholder:"Keterangan"},model:{value:t.itemForm.keterangan,callback:function(e){t.$set(t.itemForm,"keterangan","string"==typeof e?e.trim():e)},expression:"itemForm.keterangan"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Satuan"}},[a("b-input",{attrs:{state:t.$v.itemForm.satuan.$error?"invalid":"",placeholder:"Satuan"},on:{blur:function(e){return t.$v.itemForm.satuan.$touch()}},model:{value:t.itemForm.satuan,callback:function(e){t.$set(t.itemForm,"satuan","string"==typeof e?e.trim():e)},expression:"itemForm.satuan"}}),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.itemForm.satuan,fieldName:"Satuan"}})],1)],1),t._v(" "),1!=t.pengajuan.rab_final?a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Volume"}},[a("masked-input",{staticClass:"form-control",attrs:{type:"text",guide:!1,mask:t.numberMask,placeholder:"volume"},model:{value:t.itemForm.volume,callback:function(e){t.$set(t.itemForm,"volume","string"==typeof e?e.trim():e)},expression:"itemForm.volume"}})],1)],1):t._e()],1)]:t._e()],2)},[],!1,null,null,null);e.a=g.exports},OtNa:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,'@charset "UTF-8";\n.fullscreen-v-img[class] {\n  background: rgba(0, 0, 0, 0.9);\n}\n.header-v-img .buttons-v-img[class] span {\n  font-weight: 300;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n}\n.header-v-img .title-v-img[class] {\n  font-family: inherit;\n}\n.buttons-v-img[class] {\n  margin-right: 20px;\n}\n[dir=rtl] .buttons-v-img[class] {\n  margin-right: 0;\n  margin-left: 20px;\n  text-align: left;\n}\n[dir=rtl] .count-v-img[class] {\n  margin-right: 10px;\n  margin-left: 0;\n}\n.prev-v-img[class],\n.next-v-img[class] {\n  margin-top: -23px;\n  padding: 0;\n  width: 46px;\n  height: 46px;\n  border: 3px solid transparent;\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.5);\n  color: #fff !important;\n  font-weight: 100;\n  font-size: 60px;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  line-height: 30px;\n  opacity: 0.5;\n}\n.prev-v-img[class]:hover, .prev-v-img[class]:focus,\n.next-v-img[class]:hover,\n.next-v-img[class]:focus {\n  opacity: 1;\n}\n.prev-v-img[class] svg,\n.next-v-img[class] svg {\n  display: none;\n}\n[dir=rtl] .prev-v-img[class] {\n  right: 10px;\n  left: auto;\n}\n.prev-v-img[class]::after {\n  content: "\\2039";\n}\n[dir=rtl] .next-v-img[class] {\n  right: auto;\n  left: 10px;\n}\n.next-v-img[class]::after {\n  content: "\\203A";\n}\n.default-style .fullscreen-v-img {\n  z-index: 1090 !important;\n}\n.material-style .fullscreen-v-img {\n  z-index: 1090 !important;\n}',""])},X8sq:function(t,e,a){var i=a("OtNa");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},kAky:function(t,e,a){"use strict";var i=a("X8sq");a.n(i).a}}]);