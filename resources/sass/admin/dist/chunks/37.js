(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"5eju":function(t,n,a){"use strict";var e=a("ta7f"),o={name:"download-notdin",props:["notdinRef","notdinCaption","enable","allowEdit"],components:{Datepicker:a("+jP+").a},validations:{form:{nomor:{required:Object(e.requiredIf)(function(t){return"rab"!=this.notdinRef&&"renevman"!=this.notdinRef})},tanggal:{required:e.required},sifat:{required:Object(e.requiredIf)(function(t){return"rab"!=this.notdinRef&&"renevman"!=this.notdinRef})},perihal:{required:Object(e.requiredIf)(function(t){return"manrenev"==this.notdinRef||"manlaksdan"==this.notdinRef})}}},data:function(){return{form:{nomor:"",tanggal:"",sifat:"",perihal:""}}},computed:{pengajuan:{get:function(){return this.$store.state.pengajuan.oneData},set:function(t){this.$store.commit("pengajuan/setOneData",t)}}},created:function(){var t=this;this.$store.dispatch("pengajuan/getNotdin",{notdinREf:this.notdinRef,pId:this.pengajuan.id}).then(function(n){"rab"==t.notdinRef?(t.form.nomor=n.no_notdin,t.form.tanggal=null!=n.tgl_notdin?new Date(n.tgl_notdin):new Date):(t.form.nomor=n.nomor,t.form.tanggal=new Date(n.tanggal),""==n.perihal?t.form.perihal=n.perihal:t.form.perihal=t.pengajuan.nama_pekerjaan,"manrenev"!=t.notdinRef&&"manlaksdan"!=t.notdinRef||(n.sifat?t.form.sifat=n.sifat:t.form.sifat="Segera"))}).catch(function(n){console.log("load notdin "+t.notdinRef+" error : ",n),"manrenev"==t.notdinRef?t.form.perihal="Tindaklanjut Proses Evaluasi RAB":"manlaksdan"==t.notdinRef&&(t.form.perihal="Tindaklanjut Proses Pengadaan"),t.form.tanggal=new Date,t.form.sifat="Segera"})},methods:{showForm:function(t){this.$bvModal.show("notdin-modals-"+this.notdinRef)},formSubmitted:function(t){var n=this;if(t.preventDefault(),this.allowEdit){if(this.$v.$touch(),this.$v.$invalid)return this.Web.showAlert({text:"Please fix form error",title:"Alert",type:"warning"}),!1;this.$store.dispatch("pengajuan/saveNotdin",{notdinRef:this.notdinRef,pId:this.pengajuan.id,data:this.form}).then(function(t){n.Web.showAlert({text:"Data saved"}),n.$bvModal.hide("notdin-modals-"+n.notdinRef),n.download("notdin_"+n.notdinRef+"/"+n.pengajuan.id,"notdin_"+n.notdinRef+".docx")}).catch(function(t){n.Web.showAlert({text:"Save data failed : "+t.message,type:"warning"})})}else this.$bvModal.hide("notdin-modals-"+this.notdinRef),this.download("notdin_"+this.notdinRef+"/"+this.pengajuan.id,"notdin_"+this.notdinRef+".docx")}}},i=a("KHd+"),r=Object(i.a)(o,function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("span",[a("b-btn",{staticClass:"btn btn-info btn-sm",attrs:{disabled:!t.enable},on:{click:t.showForm}},[t._v("Unduh "+t._s(t.notdinCaption))]),t._v(" "),t.enable?[a("b-modal",{attrs:{id:"notdin-modals-"+t.notdinRef,size:"sm"},on:{ok:t.formSubmitted,hidden:t.$v.$reset}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n        Form /\n        "),a("span",{staticClass:"font-weight-light"},[t._v(t._s(t.notdinCaption))]),t._v(" "),a("br")]),t._v(" "),"rab"!=t.notdinRef&&"renevman"!=t.notdinRef?a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Nomor"}},[a("b-input",{attrs:{state:t.$v.form.nomor.$error?"invalid":"",placeholder:"Nomor Nota Dinas",disabled:!t.allowEdit},on:{blur:function(n){return t.$v.form.nomor.$touch()}},model:{value:t.form.nomor,callback:function(n){t.$set(t.form,"nomor","string"==typeof n?n.trim():n)},expression:"form.nomor"}}),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.form.nomor,fieldName:"Nomor"}})],1)],1):t._e(),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Tanggal"}},[a("datepicker",{attrs:{bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Tanggal","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0,disabled:!t.allowEdit},model:{value:t.form.tanggal,callback:function(n){t.$set(t.form,"tanggal",n)},expression:"form.tanggal"}}),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.form.tanggal,fieldName:"Tanggal"}})],1)],1),t._v(" "),"rab"!=t.notdinRef&&"renevman"!=t.notdinRef?a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Sifat"}},[a("b-input",{attrs:{state:t.$v.form.sifat.$error?"invalid":"",placeholder:"Sifat",disabled:!t.allowEdit},on:{blur:function(n){return t.$v.form.sifat.$touch()}},model:{value:t.form.sifat,callback:function(n){t.$set(t.form,"sifat","string"==typeof n?n.trim():n)},expression:"form.sifat"}}),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.form.sifat,fieldName:"Sifat"}})],1)],1):t._e(),t._v(" "),"manrenev"==t.notdinRef||"manlaksdan"==t.notdinRef?a("b-form-row",[a("b-form-group",{staticClass:"col position-relative",attrs:{label:"Perihal"}},[a("b-input",{attrs:{state:t.$v.form.perihal.$error?"invalid":"",placeholder:"Perihal",disabled:!t.allowEdit},on:{blur:function(n){return t.$v.form.perihal.$touch()}},model:{value:t.form.perihal,callback:function(n){t.$set(t.form,"perihal","string"==typeof n?n.trim():n)},expression:"form.perihal"}}),t._v(" "),a("invalid-tooltip",{attrs:{inputItem:t.$v.form.perihal,fieldName:"Perihal"}})],1)],1):t._e()],1)]:t._e()],2)},[],!1,null,null,null);n.a=r.exports},OWIE:function(t,n,a){"use strict";a.r(n);var e={name:"pengajuan-step-9",props:["accessUpdate","accessRead"],components:{"download-notdin":a("5eju").a},data:function(){return{curStep:9}},computed:{isWriteable:function(){return!(11!=this.pengajuan.status||!this.accessUpdate)},notDinDone:function(){return null!=this.pengajuan.notdin_mapb&&null!=this.pengajuan.notdin_keuangan},pengajuan:{get:function(){return this.$store.state.pengajuan.oneData},set:function(t){this.$store.commit("pengajuan/setOneData",t)}}},methods:{nextStep:function(){var t=this,n={id:this.pengajuan.id,status:12};this.$store.dispatch("pengajuan/updatePengajuan",n).then(function(n){t.Web.showAlert({text:"Pengajuan Telah Selesai"}),t.$router.push({name:"pengajuan"})}).catch(function(n){t.Web.showAlert({text:"Save data failed : "+n.message,type:"warning"})})}}},o=a("KHd+"),i=Object(o.a)(e,function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("b-card",{attrs:{"no-body":""}},[a("b-card-header",{staticClass:"with-elements"},[a("div",{staticClass:"card-header-title mr-2"},[a("h4",[t._v("Step 9")]),t._v(" "),a("span",[t._v("Finalisasi pengajuan oleh Laksdan")])]),t._v(" "),11!=t.pengajuan.status?a("div",{staticClass:"card-header-elements ml-md-auto"},[a("b-badge",{attrs:{variant:"outline-danger"}},[t._v("Read Only")])],1):t._e()]),t._v(" "),a("b-card-body",[a("download-notdin",{staticClass:"float-right mr-2 mb-2",attrs:{notdinCaption:"Nota Dinas Keuangan",enable:!0,allowEdit:t.isWriteable,notdinRef:"keuangan"}}),t._v(" "),a("download-notdin",{staticClass:"float-right mr-2 mb-2",attrs:{notdinCaption:"Nota Dinas Manager Unit",enable:!0,allowEdit:t.isWriteable,notdinRef:"mapb"}})],1),t._v(" "),a("b-card-footer",{staticClass:"text-right"},[a("b-btn",{staticClass:"btn btn-success btn-sm",attrs:{disabled:!(t.isWriteable&&t.notDinDone)},on:{click:t.nextStep}},[t._v("Pengajuan Selesai")])],1)],1)},[],!1,null,null,null);n.default=i.exports}}]);